import{w as $}from"./with-props-DvPqDDfd.js";import{r as g,l as c}from"./chunk-IR6S3I6Y-BvsIcvZg.js";function U(){const p=g.useRef(null),[w,G]=g.useState(null),[S,C]=g.useState([]),[E,W]=g.useState("O"),[H,I]=g.useState(null),[N,_]=g.useState(!1),[A,d]=g.useState("ゲーム開始");g.useEffect(()=>{if(p.current){const r=p.current.getContext("2d");G(r);const y=[];for(let o=0;o<3;o++){y[o]=[];for(let n=0;n<3;n++)y[o][n]=""}C(y)}},[]),g.useEffect(()=>{w&&k()},[S,w]);const k=()=>{if(!w||!p.current)return;const r=300,y=300;p.current.width=r,p.current.height=y,w.clearRect(0,0,r,y);const o=3,n=r/o;for(let h=0;h<o;h++)for(let x=0;x<o;x++){const t=x*n,e=h*n;w.strokeStyle="black",w.lineWidth=2,w.strokeRect(t,e,n,n),S[h][x]==="O"?(w.fillStyle="red",w.beginPath(),w.arc(t+n/2,e+n/2,n/3,0,2*Math.PI),w.fill()):S[h][x]==="X"&&(w.fillStyle="blue",w.beginPath(),w.arc(t+n/2,e+n/2,n/3,0,2*Math.PI),w.fill())}},R=r=>{if(!w||H||N)return;const y=p.current;if(!y)return;const o=y.getBoundingClientRect(),n=r.clientX-o.left,h=r.clientY-o.top,x=Math.floor(h/(y.height/3)),t=Math.floor(n/(y.width/3));if(S[x][t]===""){const e=[...S];e[x][t]=E,C(e),v(e)==null&&!N&&u(e)}},v=r=>{const y=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]];for(let o of y){const[n,h,x]=o;if(r[n[0]][n[1]]&&r[n[0]][n[1]]===r[h[0]][h[1]]&&r[n[0]][n[1]]===r[x[0]][x[1]])return I(r[n[0]][n[1]]),d(r[n[0]][n[1]]+"の勝ち！"),r[n[0]][n[1]]}r.flat().every(o=>o!=="")&&(_(!0),d("引き分け！"))},u=r=>{const y=j(r);if(y){const o=[...r];o[y.i][y.j]="X",C(o),k(),v(o)}},j=r=>{const y=[];for(let o=0;o<3;o++)for(let n=0;n<3;n++)r[o][n]===""&&y.push({i:o,j:n});if(y.length>0){const o=Math.floor(Math.random()*y.length);return y[o]}return null},s=()=>{const r=[];for(let y=0;y<3;y++){r[y]=[];for(let o=0;o<3;o++)r[y][o]=""}C(r),W("O"),I(null),_(!1),d("ゲーム開始")};return c.jsxs("div",{className:"game-container",children:[c.jsx("canvas",{ref:p,onClick:R}),c.jsx("div",{className:"button-container",children:c.jsx("button",{onClick:s,children:"リセット"})}),c.jsx("p",{children:A})]})}const f=9,X=50;function K(){const[p,w]=g.useState(Array(f*f).fill(0).map(()=>Math.random()>.5?2:0)),[G,S]=g.useState("Game in Progress"),C=g.useRef(null),[E,W]=g.useState(null);g.useEffect(()=>{C.current&&W(C.current.getContext("2d"))},[]),g.useEffect(()=>{E&&H()},[p,E]);function H(){E&&(E.clearRect(0,0,f*X,f*X),p.forEach((A,d)=>{const k=d%f*X,R=Math.floor(d/f)*X;E.fillStyle=A===0?"white":A===1?"black":"gray",E.fillRect(k,R,X,X),E.strokeRect(k,R,X,X)}))}function I(A){var j;if(!E||G!=="Game in Progress")return;const d=[...p],k=(j=C.current)==null?void 0:j.getBoundingClientRect();if(!k)return;let R=Math.floor((A.clientY-k.top)/X),v=Math.floor((A.clientX-k.left)/X),u=R*f+v;if(d[u]===0){d[u]=1;for(let s=R+1;s<f;s++){let r=s*f+v;if(d[r]!==1)d[r]=1;else break}for(let s=R-1;s>=0;s--){let r=s*f+v;if(d[r]!==1)d[r]=1;else break}for(let s=v+1;s<f;s++){let r=R*f+s;if(d[r]!==1)d[r]=1;else break}for(let s=v-1;s>=0;s--){let r=R*f+s;if(d[r]!==1)d[r]=1;else break}if(N(d)){console.log("You Win!"),S("You Win!"),w(d);return}if(u=_(d),R=Math.floor(u/f),v=u%f,d[u]===0){d[u]=1;for(let s=R+1;s<f;s++){let r=s*f+v;if(d[r]!==1)d[r]=1;else break}for(let s=R-1;s>=0;s--){let r=s*f+v;if(d[r]!==1)d[r]=1;else break}for(let s=v+1;s<f;s++){let r=R*f+s;if(d[r]!==1)d[r]=1;else break}for(let s=v-1;s>=0;s--){let r=R*f+s;if(d[r]!==1)d[r]=1;else break}if(N(d)){console.log("You Lose!"),S("You Lose!"),w(d);return}w(d)}}}function N(A){return A.every(d=>d!==0)}function _(A){let d=[],k=[];for(let u=0;u<=f;u++){k[u]=[];for(let j=0;j<=f;j++){k[u][j]=[];for(let s=0;s<=f;s++){k[u][j][s]=[];for(let r=0;r<=f;r++)k[u][j][s][r]=0}}}function R(u){let j=new Array(u).fill(!1);for(let s=0;s<u;s++)d[s]<u&&(j[d[s]]=!0);for(let s=0;s<u;s++)if(!j[s])return s;return u}for(let u=f-1;u>=0;u--)for(let j=u+1;j<=f;j++)for(let s=f-1;s>=0;s--)for(let r=s+1;r<=f;r++){let y=0;for(let o=u;o<j;o++)for(let n=s;n<r;n++)if(A[o*f+n]!==2){let h=k[u][o][s][n]^k[o+1][j][s][n]^k[u][o][n+1][r]^k[o+1][j][n+1][r];d[y++]=h}k[u][j][s][r]=R(y)}function v(u){let j=A.map(o=>o===1?0:1);j[u]=0;const s=Math.floor(u/f),r=u%f;for(let o=s+1;o<f&&j[o*f+r]===1;o++)j[o*f+r]=0;for(let o=s-1;o>=0&&j[o*f+r]===1;o--)j[o*f+r]=0;for(let o=r+1;o<f&&j[s*f+o]===1;o++)j[s*f+o]=0;for(let o=r-1;o>=0&&j[s*f+o]===1;o--)j[s*f+o]=0;let y=0;for(let o=0;o<f;o++)for(let n=0;n<f;n++)if(j[o*f+n]===1){let h=o,x=n;for(;h<f&&j[h*f+x]===1;)h++;for(h--;x<f&&j[h*f+x]===1;)x++;h++;for(let t=o;t<h;t++)for(let e=n;e<x;e++)j[t*f+e]=0;y^=k[o][h][n][x]}return y}for(let u=0;u<f*f;u++)if(A[u]===0&&v(u)===0)return u;console.log("Fail to Find Grundy == 0");for(let u=0;u<f*f;u++)if(A[u]===0)return u;return-1}return c.jsxs("div",{children:[c.jsx("h2",{children:G}),c.jsx("canvas",{ref:C,width:f*X,height:f*X,onClick:I})]})}const O=()=>{const[p,w]=g.useState(8),[G,S]=g.useState(7),[C,E]=g.useState(null),[W,H]=g.useState({y:0,x:0}),[I,N]=g.useState(0),[_,A]=g.useState(!1),[d,k]=g.useState(""),R=g.useCallback((n,h)=>{const x=[];for(let t=0;t<n;t++){const e=[];for(let l=0;l<h;l++)t!=0||l!=0?e.push(Math.random()<.6666?".":"#"):e.push(".");x.push(e)}return x},[]),v=g.useCallback(n=>{const h=[],x=[{y:0,x:1},{y:1,x:0},{y:1,x:1}];for(const t of x){const e=n.y+t.y,l=n.x+t.x;e<0||p<=e||l<0||G<=l||!C||C[e][l]==="#"||h.push({y:e,x:l})}return h},[p,G,C]),u=g.useCallback(n=>n.length===0?(A(!1),k((I===0?"CPU":"You")+"Win!"),!0):!1,[W,I]),j=g.useCallback(async n=>{const h=Array(p).fill(null).map(()=>Array(G).fill(!1));for(let a=p-1;a>=0;a--)for(let i=G-1;i>=0;i--){if(C&&C[a][i]==="#")continue;let m=!1;a+1<p&&C&&C[a+1][i]==="."&&(h[a+1][i]||(m=!0)),i+1<G&&C&&C[a][i+1]==="."&&(h[a][i+1]||(m=!0)),a+1<p&&i+1<G&&C&&C[a+1][i+1]==="."&&(h[a+1][i+1]||(m=!0)),h[a][i]=m}if(!h[n.y][n.x])return{win:!1,path:[]};let x=[],t=0,e=n.y,l=n.x;for(x.push({y:e,x:l});;){const a=v({y:e,x:l});if(a.length===0)break;let i;if(t===0)for(const m of a){const P=m.y,M=m.x;if(!h[P][M]){i=m;break}}else i=a[0];if(i)e=i.y,l=i.x,x.push({y:e,x:l}),t=1-t;else break}return{win:!0,path:x}},[p,G,C,v]),s=g.useCallback(async()=>{if(!_||!C)return;const n=v(W);if(!u(n)&&I===1){const h=await j(W);let x;h.win?x=h.path[1]:x=n[Math.floor(Math.random()*n.length)],H(x),N(0)}},[_,C,W,I,v,j]),r=g.useCallback(()=>{if(isNaN(p)||isNaN(G)||p<=0||G<=0){alert("HとWに正の整数を入力してください");return}if(50<p||50<G){alert("HとWはそれぞれ50以下にしてください");return}E(R(p,G)),H({y:0,x:0}),N(0),A(!0),k("Game Start"),s()},[p,G,R,s]),y=g.useCallback((n,h)=>{if(!_||I!==0||!C)return;const x=v(W);if(u(x))return;const t=x.find(e=>e.y===n&&e.x===h);t?(k(""),H(t),N(1)):k("そこには移動できません")},[_,C,W,I,v,s]),o=g.useCallback((n,h)=>!_||I!==0?!1:!!v(W).find(t=>t.y===n&&t.x===h),[_,W,I,v]);return g.useEffect(()=>{if(_&&I===1)s();else if(_&&I===0){const n=v(W);u(n)}},[_,I,W,s,v,u]),c.jsxs("div",{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"HeightInput",children:"高さ (H):"}),c.jsx("input",{type:"number",id:"HeightInput",value:p,onChange:n=>w(parseInt(n.target.value))}),c.jsx("label",{htmlFor:"WidthInput",children:"幅 (W):"}),c.jsx("input",{type:"number",id:"WidthInput",value:G,onChange:n=>S(parseInt(n.target.value))}),c.jsx("div",{className:"tabs-buttons",children:c.jsx("button",{className:"button",onClick:r,disabled:_,children:"Generate"})})]}),c.jsx("div",{id:"board",children:C&&c.jsx("table",{className:"board-table",children:c.jsx("tbody",{children:C.map((n,h)=>c.jsx("tr",{children:n.map((x,t)=>c.jsx("td",{className:`cell ${h===W.y&&t===W.x?"piece":""} ${o(h,t)?"candidate":""}`,onClick:()=>y(h,t),children:x},t))},h))})})}),c.jsx("div",{id:"result",children:d})]})},q=({titleName:p,githubLink:w})=>c.jsxs("header",{className:"header",children:[c.jsx("div",{className:"header-left",children:c.jsx("h1",{className:"header-title",children:p})}),c.jsx("div",{className:"header-right",children:c.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:c.jsx("svg",{className:"header-github-icon",viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"})})})})]}),B=({tabs:p})=>{const[w,G]=g.useState(p[0]);return c.jsxs("div",{className:"tabs-container",children:[c.jsx("div",{className:"tabs-buttons",children:p.map(S=>c.jsx("button",{onClick:()=>G(S),className:w===S?"active":"",children:S.name},S.name))}),c.jsx("div",{className:"tabs-content",children:w.contents})]})},T=16,b=40,Y=T*b;let Z=0,D=0;const F=[[[0,0],[1,0],[0,1],[1,1]],[[0,0],[1,0],[2,0],[3,0]],[[0,0],[0,1],[0,2],[0,3]],[[0,0],[1,0],[1,1],[2,1]],[[0,0],[0,1],[-1,1],[-1,2]],[[0,0],[1,0],[-1,1],[0,1]],[[0,0],[0,1],[1,1],[1,2]],[[0,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[-1,2]],[[0,0],[1,0],[2,0],[2,1]],[[0,0],[1,0],[0,1],[0,2]],[[0,0],[0,1],[0,2],[1,2]],[[0,0],[0,1],[-1,1],[-2,1]],[[0,0],[1,0],[1,1],[1,2]],[[0,0],[0,1],[1,0],[2,0]],[[0,0],[1,0],[2,0],[1,1]],[[0,0],[0,1],[0,2],[1,1]],[[0,0],[-1,1],[0,1],[1,1]],[[0,0],[0,1],[-1,1],[0,2]]];function V(){const p=g.useRef(null),[w,G]=g.useState(Array.from({length:T},()=>Array(T).fill(!1))),[S,C]=g.useState([]),[E,W]=g.useState(Array.from({length:T},()=>Array(T).fill(""))),[H,I]=g.useState(Array.from({length:T},()=>Array(T).fill(""))),[N,_]=g.useState([]),[A,d]=g.useState(0);g.useEffect(()=>{const t=p.current;if(!t)return;const e=t.getContext("2d");if(e){t.width=Y,t.height=Y,e.clearRect(0,0,Y,Y),k(e),s(e);for(let l=0;l<S.length;l++){let a=j();for(let i=0;i<4;i++){let m=S[l][i][0],P=S[l][i][1];E[m][P]=a[i],e.fillStyle="white",e.font=`${b*.6}px Arial`,e.fillText(a[i],m*b+b*.1,P*b+b*.75)}}return t.addEventListener("click",x),()=>{t.removeEventListener("click",x)}}},[]);const k=t=>{t.strokeStyle="white",t.lineWidth=1;for(let e=0;e<=T;e++)t.beginPath(),t.moveTo(e*b,0),t.lineTo(e*b,Y),t.stroke(),t.beginPath(),t.moveTo(0,e*b),t.lineTo(Y,e*b),t.stroke();for(let e=0;e<T;e++)for(let l=0;l<T;l++)t.strokeStyle="white",t.fillRect(e*b,l*b,b,b)},R=()=>{for(;;){const t=Math.floor(Math.random()*T*T),e=Math.floor(t/T),l=t%T;if(!w[e][l])return{x:e,y:l}}},v=()=>F[Math.floor(Math.random()*F.length)],u=(t,e,l)=>l.every(([a,i])=>{const m=t+a,P=e+i;return m>=0&&m<T&&P>=0&&P<T&&!w[m][P]}),j=()=>{const t=["こ","ん","な","ん"];for(let e=t.length-1;e>0;e--){const l=Math.floor(Math.random()*(e+1));[t[e],t[l]]=[t[l],t[e]]}return t.join("")},s=t=>{for(Z=0;;){const{x:e,y:l}=R(),a=v();if(u(e,l,a))S.push([]),a.forEach(([i,m])=>{const P=e+i,M=l+m;w[P][M]=!0,Z++,S[S.length-1].push([P,M])});else{if(Z++,Z==2e3)break;continue}}for(let e=0;e<T;e++)for(let l=0;l<T;l++)w[e][l]||r(t,e,l)},r=(t,e,l)=>{t.fillStyle="white",t.fillRect(e*b,l*b,b,b)},y=(t,e,l)=>{let a=["rgba(255, 0, 0, 0.3)","rgba(0, 0, 255, 0.3)","rgba(0, 255, 0, 0.3)","rgba(255, 255, 0, 0.3)","rgba(255, 165, 0, 0.3)","rgba(128, 0, 128, 0.3)","rgba(255, 192, 203, 0.3)"],i=a[Math.floor(Math.random()*a.length)];N.length%4!=0&&(i=H[N[N.length-1][0]][N[N.length-1][1]]),t.fillStyle=i,t.fillRect(e*b,l*b,b,b),H[e][l]=i,N.push([e,l])},o=()=>{let t=["rgba(255, 0, 0, 0.3)","rgba(0, 0, 255, 0.3)","rgba(0, 255, 0, 0.3)","rgba(255, 255, 0, 0.3)","rgba(255, 165, 0, 0.3)","rgba(128, 0, 128, 0.3)","rgba(255, 192, 203, 0.3)"];const e=p.current;if(!e)return;const l=e.getContext("2d");if(l){for(let a=0;a<S.length;a++){let i=t[Math.floor(Math.random()*t.length)];for(let m=0;m<4;m++){let P=S[a][m][0],M=S[a][m][1];l.fillStyle=i,D==0?l.strokeStyle=i:l.strokeStyle="rgba(0,0,0, 1)",l.lineWidth=2,l.fillRect(P*b,M*b,b,b)}}if(D==1){l&&(l.clearRect(0,0,Y,Y),l.fillStyle="black",l.fillRect(0,0,Y,Y)),k(l);for(let a=0;a<S.length;a++)for(let i=0;i<4;i++){let m=S[a][i][0],P=S[a][i][1],M=E[m][P];l.fillStyle="white",l.font=`${b*.6}px Arial`,l.fillText(M,m*b+b*.1,P*b+b*.75)}for(let a=0;a<T;a++)for(let i=0;i<T;i++)E[a][i]==""&&r(l,a,i),H[a][i]=""}D=1-D}},n=(t,e,l,a)=>Math.abs(t-l)+Math.abs(e-a),h=()=>{let t=0;const e=p.current;if(!e)return;const l=e.getContext("2d");if(l){for(let a=0;a<N.length;a+=4){let i=[],m=[];for(let M=0;M<4&&!(a+M>=N.length);M++)i.push(N[a+M]),m.push(E[N[a+M][0]][N[a+M][1]]);if(m.sort(),m[0]!="こ"||m[1]!="な"||m[2]!="ん"||m[3]!="ん")continue;let P=0;for(let M=0;M<4;M++)for(let L=M+1;L<4;L++)n(i[M][0],i[M][1],i[L][0],i[L][1])==1&&P++;P<3||t++}d(t),l&&(l.clearRect(0,0,Y,Y),l.fillStyle="black",l.fillRect(0,0,Y,Y)),k(l);for(let a=0;a<S.length;a++)for(let i=0;i<4;i++){let m=S[a][i][0],P=S[a][i][1],M=E[m][P];l.fillStyle="white",l.font=`${b*.6}px Arial`,l.fillText(M,m*b+b*.1,P*b+b*.75)}for(let a=0;a<T;a++)for(let i=0;i<T;i++)w[a][i]||r(l,a,i),H[a][i]=""}},x=t=>{const e=p.current;if(!e)return;const l=e.getContext("2d");if(!l)return;const a=e.getBoundingClientRect(),i=Math.floor((t.clientX-a.left)/b),m=Math.floor((t.clientY-a.top)/b);H[i][m]==""&&y(l,i,m)};return c.jsxs("div",{children:[c.jsx("p",{children:"「こんなん」は分割せよ。ということでこの盤面をそれぞれの「こんなん」に分けてください。"}),c.jsx("br",{}),c.jsx("p",{children:"マスをクリックすることで選択でき、4回ごとに色が変わります。 "}),c.jsx("br",{}),c.jsx("p",{children:"ただし、選択された4つのマスは全てがつながっている必要があります。"}),c.jsx("br",{}),c.jsx("p",{children:"ひとつかたまりの「こんなん」を選択できたらスコアが1増えます。"}),c.jsx("br",{}),c.jsx("p",{children:"採点する際はsubmit,模範解答を見る場合はcheck answerを押してください"}),c.jsx("br",{}),c.jsx("p",{children:"※たまたま同じ色になったとしてもそれは確率なので関係ないです。"}),c.jsx("br",{}),c.jsx("canvas",{ref:p}),c.jsx("button",{onClick:o,children:"check answer"}),c.jsx("br",{}),c.jsx("button",{onClick:h,children:"submit"}),c.jsxs("p",{children:["スコア:",A]})]})}function z({}){return[{title:"AtCoder-Games"},{name:"description",content:"AtCoDeer"}]}const ee=$(function(){return c.jsxs("div",{children:[c.jsx(q,{titleName:"AtCoder Games",githubLink:"https://github.com/amesyu/AtCoder-Games"}),c.jsx(B,{tabs:[{name:"Tic Tac Toe",contents:c.jsx(U,{})},{name:"Grid Nim",contents:c.jsx(K,{})},{name:"Grid Moving",contents:c.jsx(O,{})},{name:"Konnan",contents:c.jsx(V,{})}]})]})});export{ee as default,z as meta};
